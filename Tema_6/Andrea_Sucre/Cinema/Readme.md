# API de un sistema de reserva de butacas de cine

En este ejercicio vamos a diseñar la API REST para el cine en el que venimos trabajando en los ejercicios de los anteriores temas.

Las operaciones que la API debe soportar son las siguientes:
- Crear, eliminar y modificar películas.
- Crear, eliminar y modificar (parcialmente) salas.
- Crear, eliminar y modificar (parcialmente) usuarios.
- Crear una reserva para un usuario en una sala.
- Cancelar una reserva para un usuario en una sala.
- Modificar una reserva para un usuario en una sala.
- Registrar un pago de una reserva.

| Método HTTP | URI                                   | Query Params | Request Body                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Response Body                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Códigos HTTP de respuesta         |
|-------------|---------------------------------------|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
| GET         | /api/v1/movies                        | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data": { "count": 1, "movies": [ { "id": 1, "title": "Digimon Adventure 02: The Beginning", "image": "https://eu-static.yelmocines.es/content/img/movies/posters/5095/1/1/5095.jpg", "sinopsis": "Es el año 2012, y han pasado diez años desde la aventura en el Mundo Digital. Daisuke Motomiya tiene ahora veinte años, y él y el resto de los elegidos parecen estar cambiando poco a poco en cuanto a su aspecto y estilo de vida. Entonces, un día, un gigantesco Digitama aparece repentinamente en el cielo sobre la Torre de Tokio. Daisuke y los demás se encuentran con un misterioso joven llamado Lui Ohwada, quien les informa de que él es el primer Elegido del mundo. Secuela de \"Digimon Adventure: Last Evolution Kizuna\".", "duration": 80, "genre": "Animación", "rating": 5 } ] } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }`` | 200 <br/><br/> 400 <br/> <br/>500 |
| GET         | /api/v1/movies/:id                    | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data": { "id": 1, "title": "Digimon Adventure 02: The Beginning", "image": "https://eu-static.yelmocines.es/content/img/movies/posters/5095/1/1/5095.jpg", "sinopsis": "Es el año 2012, y han pasado diez años desde la aventura en el Mundo Digital. Daisuke Motomiya tiene ahora veinte años, y él y el resto de los elegidos parecen estar cambiando poco a poco en cuanto a su aspecto y estilo de vida. Entonces, un día, un gigantesco Digitama aparece repentinamente en el cielo sobre la Torre de Tokio. Daisuke y los demás se encuentran con un misterioso joven llamado Lui Ohwada, quien les informa de que él es el primer Elegido del mundo. Secuela de \"Digimon Adventure: Last Evolution Kizuna\".", "duration": 80, "genre": "Animación", "rating": 5 } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                               | 200 <br/><br/> 400 <br/> <br/>500 |
| POST        | /api/v1/movies/                       | -            | ``{ "title": "Digimon Adventure 02: The Beginning", "image": "https://eu-static.yelmocines.es/content/img/movies/posters/5095/1/1/5095.jpg", "sinopsis": "Es el año 2012, y han pasado diez años desde la aventura en el Mundo Digital. Daisuke Motomiya tiene ahora veinte años, y él y el resto de los elegidos parecen estar cambiando poco a poco en cuanto a su aspecto y estilo de vida. Entonces, un día, un gigantesco Digitama aparece repentinamente en el cielo sobre la Torre de Tokio. Daisuke y los demás se encuentran con un misterioso joven llamado Lui Ohwada, quien les informa de que él es el primer Elegido del mundo. Secuela de \"Digimon Adventure: Last Evolution Kizuna\".", "duration": 80, "genre": "Animación", "rating": 5 }`` | ``{"data":{ "movie_id": 1 } , "error": null }``  <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 201 <br/><br/> 400 <br/> <br/>500 |
| PUT         | /api/v1/movies/:id                    | -            | ``{ "title": "Digimon Adventure 02: The Beginning", "image": "https://eu-static.yelmocines.es/content/img/movies/posters/5095/1/1/5095.jpg", "sinopsis": "Es el año 2012, y han pasado diez años desde la aventura en el Mundo Digital. Daisuke Motomiya tiene ahora veinte años, y él y el resto de los elegidos parecen estar cambiando poco a poco en cuanto a su aspecto y estilo de vida. Entonces, un día, un gigantesco Digitama aparece repentinamente en el cielo sobre la Torre de Tokio. Daisuke y los demás se encuentran con un misterioso joven llamado Lui Ohwada, quien les informa de que él es el primer Elegido del mundo. Secuela de \"Digimon Adventure: Last Evolution Kizuna\".", "duration": 80, "genre": "Animación", "rating": 5 }`` | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| DELETE      | /api/v1/movies/:id                    | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| GET         | /api/v1/theaters                      | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data": { "count": 1, "theaters": [ { "id": 1, "city": "Madrid", "address": "Calle Serrano 2", "name": "A", "capacity": 30 } ] } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 200 <br/><br/> 400 <br/> <br/>500 |
| GET         | /api/v1/theaters/:id                  | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data": { "id": 1, "city": "Madrid", "address": "Calle Serrano 2", "name": "A", "capacity": 30 } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 200 <br/><br/> 400 <br/> <br/>500 |
| POST        | /api/v1/theaters/:id                  | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 201 <br/><br/> 400 <br/> <br/>500 |
| PATCH       | /api/v1/theaters/:id                  | -            | ``{ "name": "Sala VIP" }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| DELETE      | /api/v1/theaters/:id                  | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| GET         | /api/v1/users                         | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data": { "count": 1, "users": [ { "id": 1, "first_name": "Pedro", "last_name": "Perez", "age": 35, "email": "pedro.perez@gmail.com"  } ] } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 200 <br/><br/> 400 <br/> <br/>500 |
| GET         | /api/v1/users/:id                     | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ``{"data":{ "id": 1, "first_name": "Pedro", "last_name": "Perez", "age": 35, "email": "pedro.perez@gmail.com"  } , "error": null }`` <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 200 <br/><br/> 400 <br/> <br/>500 |
| POST        | /api/v1/users/:id                     | -            | ``{ "first_name": "Pedro", "last_name": "Perez", "age": 35, "email": "pedro.perez@gmail.com"  }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 201 <br/><br/> 400 <br/> <br/>500 |
| PATCH       | /api/v1/users/:id                     | -            | ``{ "first_name": "Pedrito" }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| DELETE      | /api/v1/users/:id                     | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 204 <br/><br/> 400 <br/> <br/>500 |
| POST        | /api/v1/theaters/:id/reservations     | -            | ``{ "user_id": 1, "seats": ["A1", "A2"] }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | ``{"data":{ "reservation_id": 1, "expiration_date": "2023-12-25T14:00:00T" } , "error": null }``  <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 201 <br/><br/> 400 <br/> <br/>500 |
| PUT         | /api/v1/theaters/:id/reservations     | -            | ``{ "user_id": 1, "seats": ["A1", "A2"] }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 201 <br/><br/> 400 <br/> <br/>500 |
| DELETE      | /api/v1/theaters/:id/reservations/:id | -            | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | - <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 201 <br/><br/> 400 <br/> <br/>500 |
| POST        | /api/v1/orders                        | -            | ``{ "reservation_id": 1, "payment_method": "card", "ammount": 3, "currency": "EUR" }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ``{"data":{ "order_id": 1 } , "error": null }``  <br/> <br/> ``{"data": null, "error": { "code": "INVALID_OPERATION", message: "This operation is not valid" } }`` <br/><br/> ``{"data": null, "error": { "code": "INTERNAL_SERVER_ERROR", message: "Internal server error" } }``                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 201 <br/><br/> 400 <br/> <br/>500 |
