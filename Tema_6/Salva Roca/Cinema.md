# API de un sistema de reserva de butacas de cine

Esta API REST, diseñada para el cine en el que venimos trabajando en los ejercicios de los anteriores temas, soporta las
siguientes operaciones:

- CRUD de películas:
    - Crear películas mediante el método POST `/movies`, introduciendo su información en el cuerpo de la petición
    - Consultar la lista completa de películas mediante el método GET `/movies`
    - Consultar una película indicando su `movieId` en la URI del método GET `/movies/{movieId}`
    - Consultar películas por título o género indicando `title`o `genre`como Query Params del método GET `/movies`
    - Modificar películas indicando su `movieId`en la URI del método PUT `/movies` y demás información en el cuerpo de
      la petición
    - Eliminar todas las películas mediante el método DELETE `/movies`
    - Eliminar una película indicando su `movieId` en la URI del método GET `/movies/{movieId}`
- CRUD de salas:
    - Crear salas con todos los asientos libres mediante el método POST `/screens`, indicando el número de filas en el
      cuerpo de la petición (filas = columnas).
    - Consultar una sala indicando su `screenId` en la URI del método GET `/screens/{screenId}`
    - Modificar parcialmente una sala indicando su `screenId` en la URI del método PATCH `/screens/{screenId}` y los
      asientos a reservar en el cuerpo de la petición.
    - Eliminar una sala indicando su `screenId` en la URI del método DELETE `/screens/{screenId}`
- CRUD de usuarios:
    - Crear usuario mediante el método POST `/users`, introduciendo su información en el cuerpo del mensaje
    - Consultar un usuario indicando su `userId` en la URI del método GET `/users/{userId}`
    - Modificar parcialmente un usuario indicando su `userId` en la URI del método PATCH `/users/{userId}` y la
      información a modificar en el cuerpo de la petición
    - Eliminar un usuario indicando su `userId` en la URI del método DELETE `/users/{userId}`
- Gestión de reservas:
    - Crear una reserva para un usuario en una sala mediante el método POST `/users/{userId}/reservations`,
      introduciendo su información en el cuerpo del mensaje
    - Consultar todas las reservas realizadas por un usuario mediante el método GET `/users/{userId}/reservations`
    - Consultar una reserva realizada por un usuario indicando su `reservationId` en la URI del método
      GET `/users/{userId}/reservations/{reservationId}`
    - Modificar una reserva para un usuario en una sala indicando su `userId` y el `reservationId` en la URI del método
      PUT `/users/{userId}/reservations` y demás información de la reserva modificada en el cuerpo de la petición
    - Registrar un pago de una reserva indicando el `userId`y el `reservationId` en la URI del método
      PATCH `/users/{userId}/reservations/{reservationId}` y los asientos a reservar en el cuerpo de la petición.
    - Cancelar una reserva para un usuario en una sala indicando el `userId`y el `reservationId` en la URI del método
      DELETE `/users/{userId}/reservations/{reservationId}`

| Método HTTP | URI                                          | Query Params | Cuerpo de la Petición                                                                                                               | Cuerpo de la Respuesta                                                                                                                                                                                                                                                                                           | Códigos de Respuesta                                                       |
|-------------|----------------------------------------------|--------------|-------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| GET         | /movies                                      | N/A          | N/A                                                                                                                                 | `{"movies": [{"movieId": 1, "title": "Movie 1", "image": "image1.jpg", "synopsis": "Synopsis of movie 1", "length": 120, "genre": "Drama", "rating": 9.0}, {"movieId": 2, "title": "Movie 2", "image": "image2.jpg", "synopsis": "Synopsis of movie 2", "length": 900, "genre": "Comedy", "rating": 8.5}, ...]}` | 200 OK<br/>204 No Content<br/>500 Internal Server Error                    |
| GET         | /movies/{movieId}                            | N/A          | N/A                                                                                                                                 | `{"movieId": 1, "title": "Movie 1", "image": "image1.jpg", "synopsis": "Synopsis of movie 1", "length": 120, "genre": "Drama", "rating": 9.0}`                                                                                                                                                                   | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| GET         | /movies                                      | title, genre | N/A                                                                                                                                 | `{"movies": [{"movieId": 1, "title": "Movie 1", "image": "image1.jpg", "synopsis": "Synopsis of movie 1", "length": 120, "genre": "Drama", "rating": 9.0}, {"movieId": 3, "title": "Movie 3", "image": "image3.jpg", "synopsis": "Synopsis of movie 3", "length": 900, "genre": "Drama", "rating": 7.2}, ...]}`  | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| POST        | /movies                                      | N/A          | `{"title": "Movie 4", "image": "image4.jpg", "synopsis": "Synopsis of movie 4", "length": 115, "genre": "Thriller", "rating": 6.7}` | `{"movieId": 4, "title": "Movie 4", "image": "image4.jpg", "synopsis": "Synopsis of movie 4", "length": 115, "genre": "Thriller", "rating": 6.7}`                                                                                                                                                                | 201 Created<br/>400 Bad Request<br/>500 Internal Server Error              |
| PUT         | /movies/{movieId}                            | N/A          | `{"title": "Movie 1", "image": "image1.jpg", "synopsis": "Modified synopsis", "length": 130, "genre": "Comedy", "rating": 8.9}`     | `{"movieId": 1, "title": "Movie 1", "image": "image1.jpg", "synopsis": "Modified synopsis", "length": 130, "genre": "Comedy", "rating": 8.9}`                                                                                                                                                                    | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| DELETE      | /movies                                      | N/A          | N/A                                                                                                                                 | `{"message": "All movies deleted"}`                                                                                                                                                                                                                                                                              | 200 OK<br/>500 Internal Server Error                                       |
| DELETE      | /movies/{movieId}                            | N/A          | N/A                                                                                                                                 | `{"message": "Movie deleted"}`                                                                                                                                                                                                                                                                                   | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| GET         | /screens/{screenId}                          | N/A          | N/A                                                                                                                                 | `{"seatMap": [[{"id": 1, "occupied": false}, {"id": 2, "occupied": false}, ...], [{"id": 11, "occupied": false}, {"id": 12, "occupied": false}, ...]]}`                                                                                                                                                          | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| POST        | /screens                                     | N/A          | `{"rows": 10}`                                                                                                                      | `{"screenId": 123, "seatMap": [[{"id": 1, "occupied": false}, {"id": 2, "occupied": false}, ...], [{"id": 11, "occupied": false}, {"id": 12, "occupied": false}, ...]]}`                                                                                                                                         | 201 Created<br/>400 Bad Request<br/>500 Internal Server Error              |
| PATCH       | /screens/{screenId}                          | N/A          | `{"selectedSeats": [11, 12]}`                                                                                                       | `{"seatMap": [[{"id": 1, "occupied": false}, {"id": 2, "occupied": false}, ...], [{"id": 11, "occupied": true}, {"id": 12, "occupied": true}, ...]]}`                                                                                                                                                            | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| DELETE      | /screens/{screenId}                          | N/A          | N/A                                                                                                                                 | `{"message": "Screen deleted"}`                                                                                                                                                                                                                                                                                  | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| GET         | /users/{userId}                              | N/A          | N/A                                                                                                                                 | `{"userId": 123, "firstName": "Salva", "lastName": "Roca", "email": "useremail@domain.com"}`                                                                                                                                                                                                                     | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| POST        | /users                                       | N/A          | `{"firstName": "John", "lastName": "Doe", "email": "john@domain.com"}`                                                              | `{"userId": 123}`                                                                                                                                                                                                                                                                                                | 201 Created<br/>400 Bad Request<br/>500 Internal Server Error              |
| PATCH       | /users/{userId}                              | N/A          | `{"userId": 123, "firstName": "John", "lastName": "Appleseed", "email": "john@domain.com"}`                                         | `{"userId": 123, "firstName": "John", "lastName": "Appleseed", "email": "john@domain.com"}`                                                                                                                                                                                                                      | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| DELETE      | /users/{userId}                              | N/A          | N/A                                                                                                                                 | `{"message": "User deleted"}`                                                                                                                                                                                                                                                                                    | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| GET         | /users/{userId}/reservations                 | N/A          | N/A                                                                                                                                 | `{"reservations": [{"reservationId": 1, "userId": 123, "screenId": 456, "reservedSeats": [11, 12], "payment": false}, {"reservationId": 2, "userId": 456, "screenId": 123, "reservedSeats": [80, 81], "payment": true}, ...]`                                                                                    | 200 OK<br/>204 No Content<br/>500 Internal Server Error                    |
| GET         | /users/{userId}/reservations/{reservationId} | N/A          | N/A                                                                                                                                 | `{"reservationId": 1, "userId": 123, "screenId": 456, "reservedSeats": [11, 12], "payment": false}`                                                                                                                                                                                                              | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
| POST        | /users/{userId}/reservations                 | N/A          | `{"screenId": 456, "reservedSeats": [45, 46, 47, 48], "payment": false}`                                                            | `{"reservationId": 3, "userId": 789, "screenId": 123, "reservedSeats": [45, 46, 47, 48], "payment": false}`                                                                                                                                                                                                      | 201 Created<br/>400 Bad Request<br/>500 Internal Server Error              |
| PUT         | /users/{userId}/reservations                 | N/A          | `{"screenId": 789, "reservedSeats": [52, 53, 54], "payment": true}`                                                                 | `{"reservationId": 3, "userId": 789, "screenId": 456, "reservedSeats": [52, 53, 54, 55], "payment": false}`                                                                                                                                                                                                      | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| PATCH       | /users/{userId}/reservations/{reservationId} | N/A          | `{"payment: true}`                                                                                                                  | `{"reservationId": 1, "userId": 123, "screenId": 456, "reservedSeats": [11, 12], "payment": true}`                                                                                                                                                                                                               | 200 OK<br/>400 Bad Request<br/>404 Not Found<br/>500 Internal Server Error |
| DELETE      | /users/{userId}/reservations/{reservationId} | N/A          | N/A                                                                                                                                 | `{"message": "Reservation deleted"}`                                                                                                                                                                                                                                                                             | 200 OK<br/>404 Not Found<br/>500 Internal Server Error                     |
